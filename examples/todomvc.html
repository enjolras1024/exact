<!DOCTYPE html>
<html>
<head lang="en">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  <title>Exact |　TodoMVC</title>

  <link href="../stylesheets/codemirror.css" rel="stylesheet">
  <link href="../stylesheets/alice.css" rel="stylesheet">
  <link href="../stylesheets/defaults.css" rel="stylesheet">
  <!--<link href="../stylesheets/index.css" rel="stylesheet">-->
</head>
<body>
<header class="header">
  <nav class="nav-bar">
    <h3 class="brand"><a href="../" class="logo">Exact</a></h3>
    <a class="menu-btn"></a>
    <ul class="menu-bar">
      <li><a href="#" class="menu-item active"> Examples </a></li>
      <li><a href="../downloads/index.html" class="menu-item"> Downloads </a></li>
      <li><a href="../documents/index.html" class="menu-item"> Documents </a></li>
      <li><a href="../apis/index.html" class="menu-item"> APIs </a></li>
      <li><a href="https://github.com/enjolras1024/exact" class="menu-item"> GitHub </a></li>
    </ul>
  </nav>
</header>
<div class="main">
  <aside class="side-bar">
    <div class="card">
      <h4>Examples</h4>
      <ul class="list">
        <li><a href="./color-palette.html" class="link">Color Palette</a></li>
        <li><a href="./svg-component.html" class="link">SVG Component</a></li>
        <li><a href="" class="link">TodoMVC</a></li>
      </ul>
    </div>

  </aside>
  <a class="side-btn">&gt;</a>
  <article class="article">
    <h2>TodoMVC</h2>
    <header class="tab-header">
      <ul class="tab-bar">
        <li><a href="#" class="tab-item active"> Result </a></li>
        <li><a href="#" class="tab-item"> HTML </a></li>
        <li><a href="#" class="tab-item"> JavaScript </a></li>
        <li><a href="#" class="tab-item"> CSS </a></li>
      </ul>
    </header>
    <section class="tab-content">
      <iframe src="todomvc/index.html" class="frame"></iframe>
    </section>
    <section class="tab-content code-box scroll">
      <div class="CodeMirror cm-s-alice">
        <div class="CodeMirror-code"><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">section</span> <span class="cm-attribute">id</span>=<span class="cm-string">"todoapp"</span><span class="cm-tag cm-bracket">&gt;&lt;/</span><span class="cm-tag">section</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">div</span> <span class="cm-attribute">class</span>=<span class="cm-string">"template"</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">  <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">section</span> <span class="cm-attribute">class</span>=<span class="cm-string">"todoapp"</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">header</span> <span class="cm-attribute">class</span>=<span class="cm-string">"header"</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">      <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">h1</span><span class="cm-tag cm-bracket">&gt;</span>todos<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">h1</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">      <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">input</span> <span class="cm-attribute">class</span>=<span class="cm-string">"new-todo"</span> <span class="cm-attribute">placeholder</span>=<span class="cm-string">"What needs to be done?"</span> <span class="cm-attribute">autofocus</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">             <span class="cm-attribute">keyup.enter+</span>=<span class="cm-string">"$.onEnter"</span> <span class="cm-attribute">change+</span>=<span class="cm-string">"$.onChange"</span> <span class="cm-attribute">value@</span>=<span class="cm-string">"$.newTodo"</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag cm-error">header</span><span class="cm-tag cm-bracket cm-error">&gt;</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">section</span> <span class="cm-attribute">class</span>=<span class="cm-string">"main"</span> <span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">      <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">input</span> <span class="cm-attribute">type</span>=<span class="cm-string">"checkbox"</span> <span class="cm-attribute">class</span>=<span class="cm-string">"toggle-all"</span> <span class="cm-attribute">id</span>=<span class="cm-string">"toggle-all"</span> <span class="cm-attribute">checked@</span>=<span class="cm-string">"$.allDone"</span> <span class="cm-attribute">change+</span>=<span class="cm-string">"$.onToggle"</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">      <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">label</span> <span class="cm-attribute">for</span>=<span class="cm-string">"toggle-all"</span><span class="cm-tag cm-bracket">&gt;</span>Mark all as complete<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">label</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">      <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">ul</span> <span class="cm-attribute">class</span>=<span class="cm-string">"todo-list"</span> <span class="cm-attribute">x-ref</span>=<span class="cm-string">"list"</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">        <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">li</span> <span class="cm-attribute">x-type</span>=<span class="cm-string">"TodoAdapter"</span> <span class="cm-attribute">x-for</span>=<span class="cm-string">"todo of $.todos | $.filter($.status)"</span> <span class="cm-attribute">x-key</span>=<span class="cm-string">"todo.id"</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">            <span class="cm-attribute">content#</span>=<span class="cm-string">"todo.content"</span> <span class="cm-attribute">completed#</span>=<span class="cm-string">"todo.completed"</span> <span class="cm-attribute">destroy+</span>=<span class="cm-string">"$.removeTodo(todo)"</span><span class="cm-tag cm-bracket">&gt;&lt;/</span><span class="cm-tag">li</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">      <span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">ul</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag cm-error">section</span><span class="cm-tag cm-bracket cm-error">&gt;</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">footer</span> <span class="cm-attribute">class</span>=<span class="cm-string">"footer"</span> <span class="cm-attribute">x-style</span>=<span class="cm-string">"display@: $.todos.length | display;"</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">      <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">span</span> <span class="cm-attribute">class</span>=<span class="cm-string">"todo-count"</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">        <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">strong</span> <span class="cm-attribute">x-ref</span>=<span class="cm-string">"strong"</span><span class="cm-tag cm-bracket">&gt;</span>@{$.remainingCount}<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">strong</span><span class="cm-tag cm-bracket">&gt;</span> @{$.remainingCount | pluralize('item')} left</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">      <span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">span</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">      <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">ul</span> <span class="cm-attribute">class</span>=<span class="cm-string">"filters"</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">        <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">li</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">          <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">a</span> <span class="cm-attribute">x-class</span>=<span class="cm-string">"selected@: $.status === 'all'"</span> <span class="cm-attribute">href</span>=<span class="cm-string">"#/"</span><span class="cm-tag cm-bracket">&gt;</span>All<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">a</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">        <span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">li</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">        <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">li</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">          <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">a</span> <span class="cm-attribute">x-class</span>=<span class="cm-string">"selected@: $.status === 'active'"</span> <span class="cm-attribute">href</span>=<span class="cm-string">"#/active"</span><span class="cm-tag cm-bracket">&gt;</span>Active<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">a</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">        <span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">li</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">        <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">li</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">          <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">a</span> <span class="cm-attribute">x-class</span>=<span class="cm-string">"selected@: $.status === 'completed'"</span> <span class="cm-attribute">href</span>=<span class="cm-string">"#/completed"</span><span class="cm-tag cm-bracket">&gt;</span>Completed<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">a</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">        <span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">li</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">      <span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">ul</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">      <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">button</span> <span class="cm-attribute">class</span>=<span class="cm-string">"clear-completed"</span> <span class="cm-attribute">click+</span>=<span class="cm-string">"$.clearCompleted"</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">              <span class="cm-attribute">x-style</span>=<span class="cm-string">"display@: $.todos.length &gt; $.remainingCount | display;"</span> <span class="cm-tag cm-bracket">&gt;</span>Clear completed<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">button</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">footer</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">  <span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">section</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag cm-error">div</span><span class="cm-tag cm-bracket cm-error">&gt;</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">ul</span> <span class="cm-attribute">class</span>=<span class="cm-string">"template"</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">  <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">li</span> <span class="cm-attribute">class</span>=<span class="cm-string">"todo-adapter"</span> <span class="cm-attribute">x-class</span>=<span class="cm-string">"completed@: $.completed; editing@: $.backup;"</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">div</span> <span class="cm-attribute">class</span>=<span class="cm-string">"view"</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">      <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">input</span> <span class="cm-attribute">type</span>=<span class="cm-string">"checkbox"</span> <span class="cm-attribute">class</span>=<span class="cm-string">"toggle"</span> <span class="cm-attribute">checked@</span>=<span class="cm-string">"$.completed"</span> <span class="cm-attribute">change+</span>=<span class="cm-string">"$.onToggle"</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">      <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">label</span> <span class="cm-attribute">dblclick+</span>=<span class="cm-string">"$.edit"</span><span class="cm-tag cm-bracket">&gt;</span>@{$.content}<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">label</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">      <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">button</span> <span class="cm-attribute">class</span>=<span class="cm-string">"destroy"</span> <span class="cm-attribute">click+</span>=<span class="cm-string">"$.destroy"</span><span class="cm-tag cm-bracket">&gt;&lt;/</span><span class="cm-tag">button</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag cm-error">div</span><span class="cm-tag cm-bracket cm-error">&gt;</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">input</span> <span class="cm-attribute">class</span>=<span class="cm-string">"edit"</span> <span class="cm-attribute">x-ref</span>=<span class="cm-string">"editor"</span> <span class="cm-attribute">value@</span>=<span class="cm-string">"$.content"</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">           <span class="cm-attribute">keyup.escape+</span>=<span class="cm-string">"$.cancelEdit"</span> <span class="cm-attribute">keyup.enter+</span>=<span class="cm-string">"$.doneEdit"</span> <span class="cm-attribute">blur+</span>=<span class="cm-string">"$.doneEdit"</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">  <span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag cm-error">li</span><span class="cm-tag cm-bracket cm-error">&gt;</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag cm-error">ul</span><span class="cm-tag cm-bracket cm-error">&gt;</span></span></pre></div>
      </div>

    </section>
    <section class="tab-content code-box scroll">
      <!--<pre class="code-behind js-mode">
(function() {
  var Skin = Exact.Skin;
  var Store = Exact.Store;
  var Component = Exact.Component;
  var Collection = Exact.Collection;

  var id = 0;

  var FILTERS = {
    ALL: 'all', ACTIVE: 'active', COMPLETED: 'completed'
  };

  var ENJ = {
    read: function() {
      var item = localStorage.getItem('todos');

      if (item) {
        return JSON.parse(item);
      }
    },
    save: function(todos) {
      localStorage.setItem('todos', JSON.stringify(todos));
    }
  };

  ENJ.TodoAdapter = Exact.defineClass({
    extend: Component,

    statics: {
      $template: Skin.query(document, '.template .todo-adapter')
    },

    register: function() {
      Exact.help(this).bind('edit', 'destroy', 'doneEdit', 'cancelEdit', 'onToggle');
    },

    onToggle: function(event) {
      this.set('completed', event.target.checked);
    },

    edit: function() {
      this.set('backup', this.content);
      this.editor.set('value', this.backup);
      this.editor.focus();
    },

    doneEdit: function(event) {
      this.submit(event.target.value.trim());
    },

    cancelEdit: function(event) {
      this.submit(this.backup);
    },

    submit: function(content) {
      if (!this.backup) { return; }

      this.set('backup', '');

      if (content) {
        this.set("content", content);
      } else {
        this.destroy();
      }
    },

    destroy: function() {
      this.send('destroy');
    }
  });

  ENJ.TodoApp = Exact.defineClass({
    extend: Component,

    statics: {
      defaults: function() {
        return {
          todos: new Collection(),
          newTodo: '',
          remainingCount: 0
        }
      },

      descriptors: {
        allDone: {
          depends: ['remainingCount'],
          get: function() {
            return this.remainingCount === 0;
          },
          set: function(value) {
            this.todos.forEach(function(todo) {
              todo.set('completed', value);
            });
          }
        }
      },

      resources: {
        display: function(visible) {
          return visible ? '' : 'none';
        },
        pluralize: function(num, str) {
          return str + (num > 1 ? 's' : '');
        },
        TodoAdapter: ENJ.TodoAdapter
      },

      $template: Skin.query(document, '.template .todoapp')
    },

    filter: function(todos, status) {
      status = status || FILTERS.ALL;
      return todos.filter(function(todo) {
        return status === FILTERS.ALL || (status === FILTERS.COMPLETED ? todo.completed : !todo.completed);
      });
    },

    register: function() {
      Exact.help(this).bind('onEnter', 'onChange', 'onToggle', 'clearCompleted');
    },

    ready: function() {
      var records = ENJ.read();

      if (records) {
        for (var i = 0, n = records.length; i < n; ++i) {
          this.addTodo(Store.create(records[i]));
        }
      }
    },

    refresh: function() {
      this.set('remainingCount', this.todos.filter(function(item){
        return !item.completed;
      }).length);

      if (this.status !== FILTERS.ALL && this.hasDirty('remainingCount')) {
        this.send('changed.todos');
      }

      ENJ.save(this.todos.slice(0));
    },

    addTodo: function(todo) {
      todo.on('changed.completed', this.invalidate);
      todo.id = ++id;
      this.todos.insert(todo);
      this.invalidate();
    },

    removeTodo: function(todo) {
      this.todos.remove(todo);
      this.invalidate();
      todo.off();
    },

    clearCompleted: function() {
      for (var i = this.todos.length - 1; i >= 0; &#45;&#45;i) {
        if (this.todos[i].completed) {
          this.todos.splice(i, 1);
        }
      }
    },

    onToggle: function(event) {
      this.set('allDone', event.target.checked);
    },

    onChange: function(event) {
      this.set('newTodo', event.target.value.trim());
    },

    onEnter: function(event) {
      if (this.newTodo) {
        this.addTodo(Store.create({
          content: this.newTodo,
          completed: false
        }));
      }

      this.set('newTodo', '');
    }
  });

  var app = Component.create(ENJ.TodoApp);

  function onHashChange () {
    var status = window.location.hash.replace(/#\/?/, '');

    if (FILTERS[status.toUpperCase()]) {
      app.set('status', status);
    } else {
      window.location.hash = '';
      app.set('status', FILTERS.ALL);
    }
  }

  window.addEventListener('hashchange', onHashChange);
  onHashChange();

  app.attach(Skin.query(document, '#todoapp'));
})();
      </pre>-->
      <div class="CodeMirror cm-s-alice">
        <div class="CodeMirror-code"><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">(<span class="cm-keyword">function</span>() {</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">  <span class="cm-keyword">var</span> <span class="cm-def">Skin</span> <span class="cm-operator">=</span> <span class="cm-variable">Exact</span>.<span class="cm-property">Skin</span>;</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">  <span class="cm-keyword">var</span> <span class="cm-def">Store</span> <span class="cm-operator">=</span> <span class="cm-variable">Exact</span>.<span class="cm-property">Store</span>;</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">  <span class="cm-keyword">var</span> <span class="cm-def">Component</span> <span class="cm-operator">=</span> <span class="cm-variable">Exact</span>.<span class="cm-property">Component</span>;</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">  <span class="cm-keyword">var</span> <span class="cm-def">Collection</span> <span class="cm-operator">=</span> <span class="cm-variable">Exact</span>.<span class="cm-property">Collection</span>;</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">  <span class="cm-keyword">var</span> <span class="cm-def">id</span> <span class="cm-operator">=</span> <span class="cm-number">0</span>;</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">  <span class="cm-keyword">var</span> <span class="cm-def">FILTERS</span> <span class="cm-operator">=</span> {</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-property">ALL</span>: <span class="cm-string">'all'</span>, <span class="cm-property">ACTIVE</span>: <span class="cm-string">'active'</span>, <span class="cm-property">COMPLETED</span>: <span class="cm-string">'completed'</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">  };</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">  <span class="cm-keyword">var</span> <span class="cm-def">ENJ</span> <span class="cm-operator">=</span> {</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-property">read</span>: <span class="cm-keyword">function</span>() {</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">      <span class="cm-keyword">var</span> <span class="cm-def">item</span> <span class="cm-operator">=</span> <span class="cm-variable">localStorage</span>.<span class="cm-property">getItem</span>(<span class="cm-string">'todos'</span>);</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">      <span class="cm-keyword">if</span> (<span class="cm-variable-2">item</span>) {</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">        <span class="cm-keyword">return</span> <span class="cm-variable">JSON</span>.<span class="cm-property">parse</span>(<span class="cm-variable-2">item</span>);</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">      }</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    },</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-property">save</span>: <span class="cm-keyword">function</span>(<span class="cm-def">todos</span>) {</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">      <span class="cm-variable">localStorage</span>.<span class="cm-property">setItem</span>(<span class="cm-string">'todos'</span>, <span class="cm-variable">JSON</span>.<span class="cm-property">stringify</span>(<span class="cm-variable-2">todos</span>));</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    }</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">  };</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">  <span class="cm-variable-2">ENJ</span>.<span class="cm-property">TodoAdapter</span> <span class="cm-operator">=</span> <span class="cm-variable">Exact</span>.<span class="cm-property">defineClass</span>({</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-property">extend</span>: <span class="cm-variable-2">Component</span>,</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-property">statics</span>: {</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">      <span class="cm-property">$template</span>: <span class="cm-variable-2">Skin</span>.<span class="cm-property">query</span>(<span class="cm-variable">document</span>, <span class="cm-string">'.template .todo-adapter'</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    },</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-property">register</span>: <span class="cm-keyword">function</span>() {</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">      <span class="cm-variable">Exact</span>.<span class="cm-property">help</span>(<span class="cm-keyword">this</span>).<span class="cm-property">bind</span>(<span class="cm-string">'edit'</span>, <span class="cm-string">'destroy'</span>, <span class="cm-string">'doneEdit'</span>, <span class="cm-string">'cancelEdit'</span>, <span class="cm-string">'onToggle'</span>);</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    },</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-property">onToggle</span>: <span class="cm-keyword">function</span>(<span class="cm-def">event</span>) {</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">      <span class="cm-keyword">this</span>.<span class="cm-property">set</span>(<span class="cm-string">'completed'</span>, <span class="cm-variable-2">event</span>.<span class="cm-property">target</span>.<span class="cm-property">checked</span>);</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    },</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-property">edit</span>: <span class="cm-keyword">function</span>() {</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">      <span class="cm-keyword">this</span>.<span class="cm-property">set</span>(<span class="cm-string">'backup'</span>, <span class="cm-keyword">this</span>.<span class="cm-property">content</span>);</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">      <span class="cm-keyword">this</span>.<span class="cm-property">editor</span>.<span class="cm-property">set</span>(<span class="cm-string">'value'</span>, <span class="cm-keyword">this</span>.<span class="cm-property">backup</span>);</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">      <span class="cm-keyword">this</span>.<span class="cm-property">editor</span>.<span class="cm-property">focus</span>();</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    },</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-property">doneEdit</span>: <span class="cm-keyword">function</span>(<span class="cm-def">event</span>) {</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">      <span class="cm-keyword">this</span>.<span class="cm-property">submit</span>(<span class="cm-variable-2">event</span>.<span class="cm-property">target</span>.<span class="cm-property">value</span>.<span class="cm-property">trim</span>());</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    },</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-property">cancelEdit</span>: <span class="cm-keyword">function</span>(<span class="cm-def">event</span>) {</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">      <span class="cm-keyword">this</span>.<span class="cm-property">submit</span>(<span class="cm-keyword">this</span>.<span class="cm-property">backup</span>);</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    },</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-property">submit</span>: <span class="cm-keyword">function</span>(<span class="cm-def">content</span>) {</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">      <span class="cm-keyword">if</span> (<span class="cm-operator">!</span><span class="cm-keyword">this</span>.<span class="cm-property">backup</span>) { <span class="cm-keyword">return</span>; }</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">      <span class="cm-keyword">this</span>.<span class="cm-property">set</span>(<span class="cm-string">'backup'</span>, <span class="cm-string">''</span>);</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">      <span class="cm-keyword">if</span> (<span class="cm-variable-2">content</span>) {</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">        <span class="cm-keyword">this</span>.<span class="cm-property">set</span>(<span class="cm-string">"content"</span>, <span class="cm-variable-2">content</span>);</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">      } <span class="cm-keyword">else</span> {</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">        <span class="cm-keyword">this</span>.<span class="cm-property">destroy</span>();</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">      }</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    },</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-property">destroy</span>: <span class="cm-keyword">function</span>() {</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">      <span class="cm-keyword">this</span>.<span class="cm-property">send</span>(<span class="cm-string">'destroy'</span>);</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    }</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">  });</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">  <span class="cm-variable-2">ENJ</span>.<span class="cm-property">TodoApp</span> <span class="cm-operator">=</span> <span class="cm-variable">Exact</span>.<span class="cm-property">defineClass</span>({</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-property">extend</span>: <span class="cm-variable-2">Component</span>,</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-property">statics</span>: {</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">      <span class="cm-property">defaults</span>: <span class="cm-keyword">function</span>() {</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">        <span class="cm-keyword">return</span> {</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">          <span class="cm-property">todos</span>: <span class="cm-keyword">new</span> <span class="cm-variable-2">Collection</span>(),</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">          <span class="cm-property">newTodo</span>: <span class="cm-string">''</span>,</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">          <span class="cm-property">remainingCount</span>: <span class="cm-number">0</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">        }</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">      },</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">      <span class="cm-property">descriptors</span>: {</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">        <span class="cm-property">allDone</span>: {</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">          <span class="cm-property">depends</span>: [<span class="cm-string">'remainingCount'</span>],</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">          <span class="cm-property">get</span>: <span class="cm-keyword">function</span>() {</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">            <span class="cm-keyword">return</span> <span class="cm-keyword">this</span>.<span class="cm-property">remainingCount</span> <span class="cm-operator">===</span> <span class="cm-number">0</span>;</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">          },</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">          <span class="cm-property">set</span>: <span class="cm-keyword">function</span>(<span class="cm-def">value</span>) {</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">            <span class="cm-keyword">this</span>.<span class="cm-property">todos</span>.<span class="cm-property">forEach</span>(<span class="cm-keyword">function</span>(<span class="cm-def">todo</span>) {</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">              <span class="cm-variable-2">todo</span>.<span class="cm-property">set</span>(<span class="cm-string">'completed'</span>, <span class="cm-variable-2">value</span>);</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">            });</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">          }</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">        }</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">      },</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">      <span class="cm-property">resources</span>: {</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">        <span class="cm-property">display</span>: <span class="cm-keyword">function</span>(<span class="cm-def">visible</span>) {</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">          <span class="cm-keyword">return</span> <span class="cm-variable-2">visible</span> <span class="cm-operator">?</span> <span class="cm-string">''</span> : <span class="cm-string">'none'</span>;</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">        },</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">        <span class="cm-property">pluralize</span>: <span class="cm-keyword">function</span>(<span class="cm-def">num</span>, <span class="cm-def">str</span>) {</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">          <span class="cm-keyword">return</span> <span class="cm-variable-2">str</span> <span class="cm-operator">+</span> (<span class="cm-variable-2">num</span> <span class="cm-operator">&gt;</span> <span class="cm-number">1</span> <span class="cm-operator">?</span> <span class="cm-string">'s'</span> : <span class="cm-string">''</span>);</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">        },</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">        <span class="cm-property">TodoAdapter</span>: <span class="cm-variable-2">ENJ</span>.<span class="cm-property">TodoAdapter</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">      },</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">      <span class="cm-property">$template</span>: <span class="cm-variable-2">Skin</span>.<span class="cm-property">query</span>(<span class="cm-variable">document</span>, <span class="cm-string">'.template .todoapp'</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    },</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-property">filter</span>: <span class="cm-keyword">function</span>(<span class="cm-def">todos</span>, <span class="cm-def">status</span>) {</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">      <span class="cm-variable-2">status</span> <span class="cm-operator">=</span> <span class="cm-variable-2">status</span> <span class="cm-operator">||</span> <span class="cm-variable-2">FILTERS</span>.<span class="cm-property">ALL</span>;</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">      <span class="cm-keyword">return</span> <span class="cm-variable-2">todos</span>.<span class="cm-property">filter</span>(<span class="cm-keyword">function</span>(<span class="cm-def">todo</span>) {</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">        <span class="cm-keyword">return</span> <span class="cm-variable-2">status</span> <span class="cm-operator">===</span> <span class="cm-variable-2">FILTERS</span>.<span class="cm-property">ALL</span> <span class="cm-operator">||</span> (<span class="cm-variable-2">status</span> <span class="cm-operator">===</span> <span class="cm-variable-2">FILTERS</span>.<span class="cm-property">COMPLETED</span> <span class="cm-operator">?</span> <span class="cm-variable-2">todo</span>.<span class="cm-property">completed</span> : <span class="cm-operator">!</span><span class="cm-variable-2">todo</span>.<span class="cm-property">completed</span>);</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">      });</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    },</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-property">register</span>: <span class="cm-keyword">function</span>() {</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">      <span class="cm-variable">Exact</span>.<span class="cm-property">help</span>(<span class="cm-keyword">this</span>).<span class="cm-property">bind</span>(<span class="cm-string">'onEnter'</span>, <span class="cm-string">'onChange'</span>, <span class="cm-string">'onToggle'</span>, <span class="cm-string">'clearCompleted'</span>);</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    },</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-property">ready</span>: <span class="cm-keyword">function</span>() {</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">      <span class="cm-keyword">var</span> <span class="cm-def">records</span> <span class="cm-operator">=</span> <span class="cm-variable-2">ENJ</span>.<span class="cm-property">read</span>();</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">      <span class="cm-keyword">if</span> (<span class="cm-variable-2">records</span>) {</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">        <span class="cm-keyword">for</span> (<span class="cm-keyword">var</span> <span class="cm-def">i</span> <span class="cm-operator">=</span> <span class="cm-number">0</span>, <span class="cm-def">n</span> <span class="cm-operator">=</span> <span class="cm-variable-2">records</span>.<span class="cm-property">length</span>; <span class="cm-variable-2">i</span> <span class="cm-operator">&lt;</span> <span class="cm-variable-2">n</span>; <span class="cm-operator">++</span><span class="cm-variable-2">i</span>) {</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">          <span class="cm-keyword">this</span>.<span class="cm-property">addTodo</span>(<span class="cm-variable-2">Store</span>.<span class="cm-property">create</span>(<span class="cm-variable-2">records</span>[<span class="cm-variable-2">i</span>]));</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">        }</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">      }</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    },</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-property">refresh</span>: <span class="cm-keyword">function</span>() {</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">      <span class="cm-keyword">this</span>.<span class="cm-property">set</span>(<span class="cm-string">'remainingCount'</span>, <span class="cm-keyword">this</span>.<span class="cm-property">todos</span>.<span class="cm-property">filter</span>(<span class="cm-keyword">function</span>(<span class="cm-def">item</span>){</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">        <span class="cm-keyword">return</span> <span class="cm-operator">!</span><span class="cm-variable-2">item</span>.<span class="cm-property">completed</span>;</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">      }).<span class="cm-property">length</span>);</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">      <span class="cm-keyword">if</span> (<span class="cm-keyword">this</span>.<span class="cm-property">status</span> <span class="cm-operator">!==</span> <span class="cm-variable-2">FILTERS</span>.<span class="cm-property">ALL</span> <span class="cm-operator">&amp;&amp;</span> <span class="cm-keyword">this</span>.<span class="cm-property">hasDirty</span>(<span class="cm-string">'remainingCount'</span>)) {</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">        <span class="cm-keyword">this</span>.<span class="cm-property">send</span>(<span class="cm-string">'changed.todos'</span>);</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">      }</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">      <span class="cm-variable-2">ENJ</span>.<span class="cm-property">save</span>(<span class="cm-keyword">this</span>.<span class="cm-property">todos</span>.<span class="cm-property">slice</span>(<span class="cm-number">0</span>));</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    },</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-property">addTodo</span>: <span class="cm-keyword">function</span>(<span class="cm-def">todo</span>) {</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">      <span class="cm-variable-2">todo</span>.<span class="cm-property">on</span>(<span class="cm-string">'changed.completed'</span>, <span class="cm-keyword">this</span>.<span class="cm-property">invalidate</span>);</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">      <span class="cm-variable-2">todo</span>.<span class="cm-property">id</span> <span class="cm-operator">=</span> <span class="cm-operator">++</span><span class="cm-variable-2">id</span>;</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">      <span class="cm-keyword">this</span>.<span class="cm-property">todos</span>.<span class="cm-property">insert</span>(<span class="cm-variable-2">todo</span>);</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">      <span class="cm-keyword">this</span>.<span class="cm-property">invalidate</span>();</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    },</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-property">removeTodo</span>: <span class="cm-keyword">function</span>(<span class="cm-def">todo</span>) {</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">      <span class="cm-keyword">this</span>.<span class="cm-property">todos</span>.<span class="cm-property">remove</span>(<span class="cm-variable-2">todo</span>);</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">      <span class="cm-keyword">this</span>.<span class="cm-property">invalidate</span>();</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">      <span class="cm-variable-2">todo</span>.<span class="cm-property">off</span>();</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    },</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-property">clearCompleted</span>: <span class="cm-keyword">function</span>() {</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">      <span class="cm-keyword">for</span> (<span class="cm-keyword">var</span> <span class="cm-def">i</span> <span class="cm-operator">=</span> <span class="cm-keyword">this</span>.<span class="cm-property">todos</span>.<span class="cm-property">length</span> <span class="cm-operator">-</span> <span class="cm-number">1</span>; <span class="cm-variable-2">i</span> <span class="cm-operator">&gt;=</span> <span class="cm-number">0</span>; <span class="cm-operator">--</span><span class="cm-variable-2">i</span>) {</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">        <span class="cm-keyword">if</span> (<span class="cm-keyword">this</span>.<span class="cm-property">todos</span>[<span class="cm-variable-2">i</span>].<span class="cm-property">completed</span>) {</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">          <span class="cm-keyword">this</span>.<span class="cm-property">todos</span>.<span class="cm-property">splice</span>(<span class="cm-variable-2">i</span>, <span class="cm-number">1</span>);</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">        }</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">      }</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    },</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-property">onToggle</span>: <span class="cm-keyword">function</span>(<span class="cm-def">event</span>) {</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">      <span class="cm-keyword">this</span>.<span class="cm-property">set</span>(<span class="cm-string">'allDone'</span>, <span class="cm-variable-2">event</span>.<span class="cm-property">target</span>.<span class="cm-property">checked</span>);</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    },</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-property">onChange</span>: <span class="cm-keyword">function</span>(<span class="cm-def">event</span>) {</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">      <span class="cm-keyword">this</span>.<span class="cm-property">set</span>(<span class="cm-string">'newTodo'</span>, <span class="cm-variable-2">event</span>.<span class="cm-property">target</span>.<span class="cm-property">value</span>.<span class="cm-property">trim</span>());</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    },</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-property">onEnter</span>: <span class="cm-keyword">function</span>(<span class="cm-def">event</span>) {</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">      <span class="cm-keyword">if</span> (<span class="cm-keyword">this</span>.<span class="cm-property">newTodo</span>) {</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">        <span class="cm-keyword">this</span>.<span class="cm-property">addTodo</span>(<span class="cm-variable-2">Store</span>.<span class="cm-property">create</span>({</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">          <span class="cm-property">content</span>: <span class="cm-keyword">this</span>.<span class="cm-property">newTodo</span>,</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">          <span class="cm-property">completed</span>: <span class="cm-atom">false</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">        }));</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">      }</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">      <span class="cm-keyword">this</span>.<span class="cm-property">set</span>(<span class="cm-string">'newTodo'</span>, <span class="cm-string">''</span>);</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    }</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">  });</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">  <span class="cm-keyword">var</span> <span class="cm-def">app</span> <span class="cm-operator">=</span> <span class="cm-variable-2">Component</span>.<span class="cm-property">create</span>(<span class="cm-variable-2">ENJ</span>.<span class="cm-property">TodoApp</span>);</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">  <span class="cm-keyword">function</span> <span class="cm-def">onHashChange</span> () {</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-keyword">var</span> <span class="cm-def">status</span> <span class="cm-operator">=</span> <span class="cm-variable">window</span>.<span class="cm-property">location</span>.<span class="cm-property">hash</span>.<span class="cm-property">replace</span>(<span class="cm-string-2">/#\/?/</span>, <span class="cm-string">''</span>);</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-keyword">if</span> (<span class="cm-variable-2">FILTERS</span>[<span class="cm-variable-2">status</span>.<span class="cm-property">toUpperCase</span>()]) {</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">      <span class="cm-variable-2">app</span>.<span class="cm-property">set</span>(<span class="cm-string">'status'</span>, <span class="cm-variable-2">status</span>);</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    } <span class="cm-keyword">else</span> {</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">      <span class="cm-variable">window</span>.<span class="cm-property">location</span>.<span class="cm-property">hash</span> <span class="cm-operator">=</span> <span class="cm-string">''</span>;</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">      <span class="cm-variable-2">app</span>.<span class="cm-property">set</span>(<span class="cm-string">'status'</span>, <span class="cm-variable-2">FILTERS</span>.<span class="cm-property">ALL</span>);</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    }</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">  }</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">  <span class="cm-variable">window</span>.<span class="cm-property">addEventListener</span>(<span class="cm-string">'hashchange'</span>, <span class="cm-variable-2">onHashChange</span>);</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">  <span class="cm-variable-2">onHashChange</span>();</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">  <span class="cm-variable-2">app</span>.<span class="cm-property">attach</span>(<span class="cm-variable-2">Skin</span>.<span class="cm-property">query</span>(<span class="cm-variable">document</span>, <span class="cm-string">'#todoapp'</span>));</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">})();</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">      </span></pre></div>
      </div>
    </section>

    <section class="tab-content code-box scroll">
      <div class="CodeMirror cm-s-alice">
        <div class="CodeMirror-lines">
          <div style="position: relative; outline: none;">
            <div class="CodeMirror-code"><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-qualifier">.template</span> {</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">  <span class="cm-property">display</span>: <span class="cm-atom">none</span>;</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div>
          </div>
        </div>
      </div>
    </section>
  </article>

</div>

<script src="../javascripts/codemirror.js"></script>
<script src="../javascripts/xml-mode.js"></script>
<script src="../javascripts/javascript-mode.js"></script>
<script src="../javascripts/site.js"></script>
<!--<footer class="footer">
  <p>Released under the MIT license<br>
    © 2015 Chen Junyong. All rights reserved.</p>
</footer>-->
</body>
</html>