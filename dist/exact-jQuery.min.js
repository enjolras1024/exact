!function(e,t){"use strict";var n={version:"0.0.3"};!function(){function e(e,t){return{value:e[t]}}function t(e,t,n){if(!n||"object"!=typeof n)throw new Error("");e[t]=n.value}function i(n){if(void 0===n||null===n)throw new TypeError("Cannot convert undefined or null to object");if(!(n instanceof Object)){var i=typeof n;"number"===i?n=new Number(n):"string"===i?n=new String(n):"boolean"===i&&(n=new Boolean(n))}var r,s,o,a=arguments.length;for(o=1;o<a;++o)if(r=arguments[o],r instanceof Object)for(s in r)r.hasOwnProperty(s)&&t(n,s,e(r,s));return n}function r(e,t){void 0===t&&(t=-1);var n,i,s;if(!(e instanceof Object&&e&&t))return e;if("function"==typeof e)i=function(){return e.apply(this,arguments)};else{s=e.constructor,i=new s;for(n in e)e.hasOwnProperty(n)&&(i[n]=r(e[n],t-1))}return i}function s(e,t){if("object"==typeof t&&t){if(t.hasOwnProperty("$set"))return t.$set;var n,o=r(e,1);t.hasOwnProperty("$assign")?i(o,t.$assign):t.hasOwnProperty("$push")?c.apply(o,t.$push):t.hasOwnProperty("$unshift")?u.unshift.apply(o,t.$unshift):t.hasOwnProperty("$splice")?l.splice.apply(o,t.$splice):t.hasOwnProperty("$apply")&&(o=t.$apply(o));for(n in t)t.hasOwnProperty(n)&&!f.hasOwnProperty(n)&&(o[n]=s(e[n],t[n]));return o}}var o={};o.seal="seal"in Object,o.freeze="freeze"in Object;try{Object.defineProperty({},"x",{get:function(){},set:function(){}}),o.accessor=!0}catch(a){o.accessor=!1}var c=Array.prototype.push,l=Array.prototype.splice,u=Array.prototype.unshift,f={$set:!0,$push:!0,$unshift:!0,$splice:!0,$apply:!0};n.ObjectUtil={assign:Object.assign||i,defineProp:o.accessor?Object.defineProperty:t,getDescriptor:Object.getOwnPropertyDescriptor||e,update:s,clone:r,support:function(e){return o[e]}}}(),function(){function e(e,t){if(e.indexOf(".")>0||e.indexOf("[")>0){e=e.split(i);for(var n=-1,r=e.length-1;++n<r;)if(t=t[e[n]],void 0===t)return;e=e[n]}return t[e]}var t=n.ObjectUtil.defineProp,i=/\[|\]?\./;t(n,"RES",{value:{search:function(t,n,i){if(n)var r=e(t,n);return r||i||(r=e(t,this)),r},register:function(e,n){var r,s=this;if(e.indexOf(".")>0||e.indexOf("[")>0){e=e.split(i);for(var o=-1,a=e.length-1;++o<a;){if(r=s[e[o]],void 0===r)r=s[e[o]]={};else if("object"!=typeof r)throw new TypeError("You can not register resource to "+typeof r);s=r}e=e[o]}return!s.hasOwnProperty(e)&&(t(s,e,{value:n}),!0)}}})}(),function(){function e(e,n){var r,s,o;for(r=0,s=n.length;r<s;++r){o=n[r];for(var a in o)o.hasOwnProperty(a)&&t(e,a,i(o,a))}}var t=(n.ObjectUtil.assign,n.ObjectUtil.defineProp),i=n.ObjectUtil.getDescriptor,r={bind:function(){var e,t,n=this.target;if("object"!=typeof arguments[0])for(var i=0,r=arguments.length;i<r;++i)e=arguments[i],t=n[e],"function"==typeof t&&(n[e]=t.bind(n));else{var s=arguments[0];for(e in s)s.hasOwnProperty(e)&&(t=n[e],"function"==typeof t&&(n[e]=t.bind.apply(t,[n].concat(s[e]))))}}};n.help=function(e){return r.target=e,r},n.setImmediate=function(e,t){return e||(e=t||function(e){setTimeout(e,0)}),e}("undefined"!=typeof setImmediate?setImmediate:null,"undefined"!=typeof requestAnimationFrame?requestAnimationFrame:null),n.defineClass=function(n){var i,r,s,o,a;if(n.hasOwnProperty("extend")){if(r=n.extend,"function"!=typeof r)throw new TypeError("superClass must be a function")}else r=Object;if(n.hasOwnProperty("constructor")){if(i=n.constructor,"function"!=typeof i)throw new TypeError("subClass must be a function")}else i=function(){r.apply(this,arguments)};return i.prototype=Object.create(r.prototype),a=[i.prototype],s=n.mixins,Array.isArray(s)&&a.push.apply(a,s),a.push(n),e(i.prototype,a),t(i.prototype,"constructor",{value:i,enumerable:!1,writable:!0,configurable:!0}),a=[i,r],o=n.statics,o&&(s=o.mixins,Array.isArray(s)&&a.push.apply(a,s),a.push(o)),e(i,a),delete i.prototype.statics,delete i.prototype.entend,delete i.prototype.mixins,delete i.mixins,i}}(),function(){var e="'".charCodeAt(0),t=" ".charCodeAt(0),i="\\".charCodeAt(0);n.StringUtil={split:function(n,r,s){var o,a,c,l,u,f,h,p,d=-1,v=-1,g=[];if(n=n.trim(),n[n.length-1]!==r&&(n+=r),o=n.length,1===o)return g;for(v=0,r=r.charCodeAt(0),s=[s.charCodeAt(0),s.charCodeAt(1)];++d<o;)if(a=n.charCodeAt(d),a!==t)if(a!==e||c===i){if(f?a===u?--f:a===l&&++f:(l=-1,u=-1,a!==s[0]||h||(l=a,u=s[1],f=1)),!h&&!f&&a===r){if(p=n.slice(v,d).trim(),!p)throw new Error("Illegal argument list");g.push(p),v=d+1}c=a}else c=a,h=!h;else c=a;return g}}}(),function(){function e(e){return l[e]}function t(e){try{return JSON.parse(e)}catch(t){}}function i(e){return!!c(e)}function r(e){return Number(e)}function s(e){return e}function o(e){var t=e.indexOf("'"),n=e.lastIndexOf("'");return e.slice(t+1,n)}function a(e){return t(e)||null}function c(n,i){if("string"!=typeof n)throw new TypeError("expr must be string");if(n=n.trim(),i&&"string"==typeof i){if(!(i in u))throw new Error("no such type of literal parser, try on json");return u[i](n)}return l.hasOwnProperty(n)?e(n):isNaN(n)?f.test(n)?o(n):t(n):r(n)}var l={"true":!0,"false":!1,NaN:NaN,"null":null,undefined:void 0},u={"boolean":i,number:r,string:s,json:a},f=/^'.*'$/;n.LiteralUtil={parse:c,toNumber:r,toBoolean:i,toAnyValue:t}}(),function(){function e(e,t,n){this.exec=e,this.back=n,this.args=t}function t(e){return arguments[arguments.length-1]}function i(e){return!e}function r(t,n,i){return new e(t,n,i)}function s(n){return new e(t,n)}function o(t){return new e(i,t)}function a(t,n){return new e(new Function(n||"","var $ = this; return "+t+";"),"$")}function c(e,t,n){var i,r,s,o;for(i=0,r=t.length;i<r;++i)o=t[i],o&&(s=e[i],1!==o?2===o&&(e[i]=l(s,"exec",n)):e[i]=u.search(s,n,!0))}function l(e,t,n,i,r){var s,o,a,l=null,f=arguments.length>4;if(s=e[t],!s){l=n,t=e.name;var h=t.lastIndexOf(".");h>0&&(l=u.search(t.slice(0,h),n,!0),t=t.slice(h+1)),s=l[t]}return(o=e.args)?"$"===o?s.call(n,i):(a=o.flags,o=o.slice(0),a&&c(o,a,n),f&&o.unshift(r),s.apply(l,o)):f?s.call(l,r):s.call(l)}var u=n.RES;n.EvaluatorUtil={makeExpressionEvaluator:a,makeGetEvaluator:s,makeNotEvaluator:o,makeEvaluator:r,applyEvaluator:l}}(),function(){function e(e,t){this.type=e,this.template=t}var t={isExpression:function(t){return t instanceof e},makeExpression:function(t,n){return new e(t,n)},applyExpression:function(e,t,n,i){var r=e.type,s=e.template;r&&r.compile&&r.compile(s,i,n,t)}};n.ExpressionUtil=t}(),function(){function e(){this._actions=null}function t(e){var t;if(e.type)t=e;else{t={};var n=e.indexOf(".");n>0?(t.type=e.slice(0,n),t.keyName=e.slice(n+1)):t.type=e}return t}function i(e,n,i,r){var s=e._actions,o=e.constructor;if("function"!=typeof i)return null;s||(c(e,"_actions",{value:{}}),s=e._actions);var a=t(n),l=s[a.type];l||(l=s[a.type]={handlers:[]});var u,f,h=l.handlers,p=a.keyName,d=h.length;for(f=0;f<d;++f)if(u=h[f],i===u.exec&&p===u.keyName)return l;return u={exec:i},p&&(u.keyName=p),r&&(u.useCapture=r),h.push(u),"listener"in l||("function"==typeof o.addEventListenerFor?o.addEventListenerFor(e,a.type,r):u.listener=null),l}function r(e,n,i,r){var s=e._actions,o=e.constructor,a=2===arguments.length;if(s){var c=t(n),l=s[c.type];if(l){var u,f,h=l.handlers,p=c.keyName,d=h.length;if(a&&!p)h.splice(0);else for(f=0;f<d;++f)if(u=h[f],(a||i===u.exec)&&(!p||p===u.keyName)){h.splice(f,1),--l.count;break}return 0===h.length&&(l.listener&&"function"==typeof o.removeEventListenerFor&&o.removeEventListenerFor(e,c.type,r),delete s[c.type]),l}}}function s(e){var t,n=e._actions;if(n)for(t in n)n.hasOwnProperty(t)&&r(e,t)}function o(e,n,i,r){var s,o=e._actions;if(o&&(i=t(i),s=o[i.type])){i.dispatcher=e,n&&r.unshift(i);var a,c,l,u,f=s.handlers;for(c=f.length,a=0;a<c;++a)u=f[a],i.keyName&&i.keyName!==u.keyName||1===i.eventPhase==!!u.useCapture&&(l=u.exec,l.apply(null,r))}}var a=[].slice,c=n.ObjectUtil.defineProp;n.defineClass({constructor:e,on:function(e,t,n){var r,s;if("object"==typeof e){r=e;for(e in r)r.hasOwnProperty(e)&&(s=r[e],Array.isArray(s)?i(this,e,s[0],s[1]):i(this,e,s))}else i(this,e,t,n);return this},off:function(e,t,n){var i,o,a=arguments.length,c=typeof e;if(0===a)s(this);else if("string"===c)1===a?r(this,e):r(this,e,t,n);else if("object"===c){i=e;for(e in i)i.hasOwnProperty(e)&&(o=i[e],Array.isArray(o)?r(this,e,o[0],o[1]):r(this,e,o))}return this},emit:function(e){var t=a.call(arguments,1);return o(this,!1,e,t),this},send:function(e){var t=a.call(arguments,1);return o(this,!0,e,t),this}}),n.Watcher=e}(),function(){function e(){throw new Error("")}function t(){s=0,a=!0;for(var e;s<r.length;)e=r[s],e.update(),++s;o=!1,a=!1,r.splice(0),s=0}var i=n.setImmediate,r=[],s=0,o=!1,a=!1;n.defineClass({constructor:e,statics:{add:function(e){if(e){var n,c=r.length,l=e.guid;if(a)for(n=s;n<c&&l>=r[n].guid;)++n;else{for(n=c-1;n>=0&&l<r[n].guid;)--n;++n}r.splice(n,0,e),o||(o=!0,i(t))}}}}),n.Updater=e}(),function(){function e(e){return function(){return this._props[e]}}function t(e){return function(t){var n=this._props;n.set(e,t,n[e],this,this._descriptors_)}}function i(e){throw new Error("Accessor is abstract class and can not be instantiated")}var r,s=n.ObjectUtil.assign,o=n.ObjectUtil.defineProp,a=n.ObjectUtil.support("accessor");r=a?function c(e,t){if(void 0===e)return this;var n=typeof e,c=this.constructor.set,i=this._descriptors_;if("object"!==n)i&&e in i?this[e]=t:c.call(this,e,t,this[e],this,i);else if(e){var r=e;if(i)for(e in r)r.hasOwnProperty(e)&&(e in i?this[e]=r[e]:c.call(this,e,r[e],this[e],this,i));else for(e in r)r.hasOwnProperty(e)&&c.call(this,e,r[e],this[e],this,i)}return this}:function l(e,t){if(void 0===e)return this;var n=typeof e,l=this.constructor.set,i=this._descriptors_;if("object"!==n)l.call(this,e,t,this[e],this,i);else if(e){var r=e;for(e in r)r.hasOwnProperty(e)&&l.call(this,e,r[e],this[e],this,i)}return this},n.defineClass({constructor:i,statics:{set:function(e,t,n){return this[e]=t,this[e]!==n},initialize:function(n,i){var r=n.constructor,c=r.descriptors;if(!n._descriptors_&&Array.isArray(c)){var l,u,f=c.length,h=c.slice(0);for(c="object"==typeof h[f-1]?h.pop():{},f=h.length;--f>=0;)c[h[f]]={};if(a){var p={};o(n,"_props",{value:p}),o(p,"set",{value:r.set});for(l in c)if(c.hasOwnProperty(l)){u=c[l];var d={enumerable:!("enumerable"in u)||u.enumerable,configurable:!("configurable"in u)||u.configurable};"set"in u?(d.get=u.get,d.set=u.set):"get"in u?d.get=u.get:(d.get=e(l),d.set=t(l)),o(n,l,d)}}o(n,"_descriptors_",{value:c})}if("function"==typeof n.defaults)var v=n.defaults();n.set(s({},v,i))}},$get:a?function(e){return this._props[e]}:null,$set:a?function(e,t){var n=this._props;n.set(e,t,n[e],this,this._descriptors_)}:null,set:r}),n.Accessor=i}(),function(){function e(){throw new Error("Validator is static class")}function t(e,t,n,i){return new TypeError("`"+t+"` of type `"+(e||"<<anonymous>>")+"` should be `"+n+(i?"`, not `"+i:"")+"`")}var i={number:/\bnumber\b/,string:/\bstring\b/,"boolean":/\bboolean\b/};n.defineClass({constructor:e,statics:{validate:function r(t,n,i,s){var o,r,a,c,l;if(s&&s.hasOwnProperty(n)){if(l=s[n],!l)return!0;var u=typeof l;if("string"===u||"function"===u)c=l;else{if("object"!==u)return!0;c=l.type,a=l.pattern}if(r=l.validate,!o&&c&&(o=e.validateType(t,n,i,c)),!o&&a&&(o=e.validatePattern(t,n,i,a)),o||"function"!=typeof r||(o=r.call(t,i,n)),o)return console.warn("Invalid:",o.message),t.on&&t.send&&t.send("invalid."+n,o),!1}return!0},validateType:function(e,n,r,s){if(void 0!==r){var o,a,c,l=typeof s;return o=typeof r,"string"!==l||i[o].test(s)?"function"!==l||r instanceof s||(l=s.fullName||s.name,c=r.constructor,o=c.fullName||c.name,a=!0):(l=s,a=!0),a?(c=e.constructor,t(c.fullName||c.name,n,l,o)):void 0}},validatePattern:function(e,t,n,i){if(!i.test(n))return new Error(n,"does not match the pattern "+i.toString())}}}),n.Validator=e}(),function(){function e(){throw new Error("DirtyChecker is static class and can not be instantiated")}var t=n.ObjectUtil.defineProp;n.defineClass({constructor:e,statics:{check:function(e,n,i,r){var s=e._dirty;s||(s={},t(e,"_dirty",{value:s,enumerable:!1,writable:!0,configurable:!0})),n in s?s[n]===i&&delete s[n]:s[n]=r},clean:function(e,t){t?delete e._dirty[t]:delete e._dirty},hasDirty:function(e,t){var n=e._dirty;return!!n&&(void 0===t||n.hasOwnProperty(t))}},hasDirty:function(e){var t=this._dirty;return!!t&&(void 0===e||t.hasOwnProperty(e))}}),n.DirtyChecker=e}(),function(){function e(e){t.initialize(this,e)}var t=n.Accessor,i=n.DirtyChecker,r=t.set,s=i.check,o=i.clean;n.defineClass({constructor:e,mixins:[t.prototype],statics:{set:function(e,t,n,i,o){var a=r.call(this,e,t,n,i,o);return a&&(s(i,e,this[e],n),i.onChange&&i.onChange()),a},clean:o}}),n.Cache=e}(),function(){function e(e){i.initialize(this,e)}var t=n.Watcher,i=n.Accessor,r=n.Validator,s=i.set,o=r.validate;n.defineClass({constructor:e,mixins:[t.prototype,i.prototype],statics:{set:function(e,t,n,i,r){if(!o(i,e,t,r))return!1;var a=s.call(this,e,t,n,i,r);return a&&i.send("changed."+e),a}}}),n.Store=e}(),function(){function e(){this.push.apply(this,arguments)}function t(e,t){e.isInvalid=!0,e.send("changed"),e.onChange&&e.onChange()}var i=n.Watcher,r=Array.prototype;n.defineClass({constructor:e,extend:Array,mixins:[i.prototype],statics:{from:function(t){var n=new e;return n.push.apply(n,t),n},clean:function(e){e.isInvalid=!1}},push:function(){return r.push.apply(this,arguments),t(this),this.length},pop:function(){var e=r.pop.call(this);return t(this),e},unshift:function(){return r.unshift.apply(this,arguments),t(this),this.length},shift:function(){var e=r.shift.call(this);return t(this),e},splice:function(){var e=r.splice.apply(this,arguments);return t(this),e},sort:function(e){return r.sort.call(this,e),t(this),this},set:function(e,n){if(e>=this.length){for(var i=this.length;i<e;++i)r.push.call(this,void 0);r.push.call(this,n)}else{if(this[e]===n)return this;this[e]=n}return t(this),this},reset:function(e){var n,i,s;for(i=this.length,s=e.length,i>s&&r.splice.call(this,s),n=0;n<s;++n)this[n]=e[n];return this.length=s,t(this),this},insert:function(e,n){if(!(e instanceof Object&&n instanceof Object))throw new TypeError("Failed to execute `insert` on `Collection`: 2 arguments must be object.");var i,s;if(s=this.length,n&&n===e)return this;for(i=0;i<s;++i)if(this[i]===e){if(i===s-1)return this;r.splice.call(this,i,1),s=this.length;break}if(n){for(i=0;i<s&&this[i]!==n;++i);if(i===s)throw new Error("The item before which the new item is to be inserted is not existed in this collection");r.splice.call(this,i,0,e)}else r.push.call(this,e);return t(this),this},remove:function(e){if(!(e instanceof Object))throw new TypeError("Failed to execute `remove` on `Collection`: the item to be removed must be object.");var n,i;for(n=0,i=this.length;n<i&&this[n]!==e;++n);if(n===i)throw new Error("The item is to be removed is not existed in this collection");return n<i-1?r.splice.call(this,n,1):r.pop.call(this),t(this),this},replace:function(e,t){if(!(e instanceof Object&&t instanceof Object))throw new TypeError("Failed to execute `insert` on `Collection`: 2 arguments must be object.");var n,i;for(n=0,i=this.length;n<i;++n)if(this[n]===t){this.set(n,e);break}if(n===i)throw new Error("The item to be replaced is not existed in this collection");return this},empty:function(){return this.splice(0),this}}),n.Collection=e}(),function(){function e(e){var t=new f;return t.onChange=e.invalidate,t}function t(e){var t=new h;return t.onChange=e.invalidate,t}function i(){return this._attrs||w(this,"_attrs",{value:e(this),configurable:!0}),this._attrs}function r(){return!this._style&&u.isElement(this.$skin)&&w(this,"_style",{value:e(this),configurable:!0}),this._style}function s(){return!this._classes&&u.isElement(this.$skin)&&w(this,"_classes",{value:e(this),configurable:!0}),this._classes}function o(){return!this._children&&u.isElement(this.$skin)&&w(this,"_children",{value:t(this),configurable:!0}),this._children}function a(e){var t,n,i,r,s,o;for(i=0,n=e.length,o=[],t=0;t<n;++t)s=e[t],r=s.$skin,s instanceof c&&r&&o.push(r);return o}function c(){throw new Error("")}var l,u=n.Skin,f=n.Cache,h=n.Collection,p=n.Updater,d=n.Accessor,v=n.DirtyChecker,g=n.setImmediate,y=n.ObjectUtil,m=d.set,x=v.check,w=(v.clean,y.assign,y.defineProp),b=0;l=y.support("accessor")?function(e){w(e,"attrs",{get:i}),w(e,"style",{get:r}),w(e,"classes",{get:s}),w(e,"children",{get:o})}:function(n){w(n,"attrs",{value:e(n)}),w(n,"style",{value:e(n)}),w(n,"classes",{value:e(n)}),w(n,"children",{value:t(n)}),n._attrs=n.attrs,n._style=n.style,n._classes=n.classes,n._children=n.children,n._contents=n.contents},n.defineClass({constructor:c,mixins:[d.prototype,v.prototype],update:function(){this.isInvalid&&(console.log("update",this.toString()),this.refresh&&this.refresh(),this.send&&this.send("refreshed"),c.render(this),c.clean(this))},invalidate:function(e,t,n){return this.isInvalid||(console.log("invalidate",this.toString()),this.isInvalid=!0,p.add(this)),this},toString:function(){var e=this.constructor,t=u.getProp(this.$skin,"tagName");return(e.fullName||e.name)+"<"+(t?t.toLowerCase():"")+">("+this.guid+")"},blur:function(){var e=this.$skin;g(function(){u.blur(e)})},focus:function(){var e=this.$skin;g(function(){u.focus(e)})},statics:{set:function(e,t,n,i,r){var s=m.call(this,e,t,n,i,r);return s&&(x(i,e,this[e],n),i.invalidate(e,this[e],n)),s},initialize:function(e,t,n){e.guid=++b,c.initSkin(e,t),u.isElement(e.$skin)&&l(e),e.update=e.update.bind(e),e.invalidate=e.invalidate.bind(e),d.initialize(e,n)},initSkin:function(e,t){w(e,"$skin",{value:t?u.createElement(t):u.createText("")}),u.canExtend(e.$skin)&&w(e.$skin,"_shadow",{value:e})},clean:function(e){e.isInvalid=!1},render:function(e){var t=e.$skin,n=e,i=e._attrs,r=e._style,s=e._classes,o=e._children,l=null;if(n&&e._dirty&&(l=e._dirty,u.renderProps(t,n,l)),u.isElement(t)&&(i&&i._dirty&&(l=i._dirty,f.clean(i),u.renderAttrs(t,i,l)),r&&r._dirty&&(l=r._dirty,f.clean(r),u.renderStyle(t,r,l)),s&&s._dirty&&(l=s._dirty,f.clean(s),u.renderClasses(t,s,l)),o&&o.isInvalid)){h.clean(o);var p=u.renderChildren(t,a(o));if(p&&p.length>0)for(var d=0,v=p.length;d<v;++d){var g=u.getParent(p[d]);g||(e=c.getShadow(p[d]),c.release(e))}}},release:function(e){var t=e.constructor.release;t&&t(e),e.release&&e.release()},getShadow:function(e){return e&&e._shadow},findShadow:function(e,t){if(u.isElement(e.$skin))return c.getShadow(u.query(e.$skin,t))},findShadows:function(e,t){if(u.isElement(e.$skin)){var n,i,r=[],s=u.queryAll(e.$skin,t);for(n=0,i=s.length;n<i;++n)r.push(c.getShadow(s[n]));return r}},getParentShadow:function(e){return c.getShadow(u.getParent(e.$skin))},addEventListenerFor:function(e,t,n){var i,r=e._actions[t];i=e.$skin,u.mayDispatchEvent(i,t)?(r.listener=function(t){e.send(u.getFixedEvent(t))},u.addEventListener(i,t,r.listener,n)):r.listener=null},removeEventListenerFor:function(e,t,n){var i,r=e._actions,s=r[t];i=e.$skin,u.mayDispatchEvent(i,t)&&(u.removeEventListener(i,t,s.listener,n),delete s.listener)}}});for(var E=["update","refresh","initSkin","getShadow","findShadow","findShadows","getParentShadow"],C=0;C<E.length;++C)w(c,E[C],{writable:!1,enumerable:!1,configurable:!0});n.Shadow=c}(),function(){function e(t){e.initialize(this,t)}var t=n.Shadow;n.defineClass({constructor:e,extend:t,statics:{create:function(t){var n=new e;return n.set("data",t),n},release:function(e){t.clean(e)},initialize:function(e,n){t.initialize(e,"",{data:n})}},toString:function(){return'"'+this.data+'"('+this.guid+")"}}),n.Text=e}(),function(){function e(t,n){e.initialize(this,t,n)}var t=n.Shadow,i=n.Watcher;n.defineClass({constructor:e,extend:t,mixins:[i.prototype],statics:{fullName:"Element",release:function(e){e.off(),t.clean(e)},create:function(t,n){return new e(t,n)}}}),n.Element=e}(),function(){function e(t){this.register(),e.initialize(this,t),this.ready()}var t=n.Watcher,i=(n.Updater,n.Validator),r=(n.Text,n.Shadow),s=(n.Element,r.set),o=n.Skin.isElement,a=i.validate,c=r.prototype;n.defineClass({constructor:e,extend:r,mixins:[t.prototype],statics:{fullName:"Component",set:function(e,t,n,i,r){return!!a(i,e,t,r)&&s.call(this,e,t,n,i,r)},create:function(e,t){return new e(t)},destroy:function(e){var t,n,i,s=e.children;for(t=0,n=s.length;t<n;++t)i=s[t],i.constructor.destroy(i);e.off(),r.clean(e)},release:function(e){var t,n=e._children;if(n)for(t=n.length-1;t>=0;--t)r.release(n[t]);var i,s=e._bindings;if(s)for(t=s.length-1;t>=0;++t)i=s[t],i.constructor.clean(i);e.off(),r.clean(e)},initialize:function(e,t){var i,s=n.HTMXTemplate,a=e.constructor,c=a.template;if(c){if(!(c instanceof s))throw new TypeError("The template must be instance of Exact.HTMXTemplate")}else i=a.$template,c=i&&("string"==typeof i||o(i))?s.parse(a.$template,a.imports):s.parse("<div></div>",a.imports),a.template=c;r.initialize(e,c.tag,t),s.compile(c,e),e.send("initialized")}},register:function(){},ready:function(){},refresh:function(){},release:function(){},invalidate:function(e,t,n){c.invalidate.call(this,e,t,n),e&&this.send("changed."+e,t,n)}}),n.Component=e}(),function(){function e(e){var t=e.itemAdapter,r=e.itemTemplate;t||r&&(t=n.defineClass({extend:i,statics:{imports:{},template:e.itemTemplate}}),e.itemAdapter=t)}function t(){i.apply(this,arguments)}var i=n.Component;n.defineClass({constructor:t,extend:i,statics:{fullName:"List",$template:"<ul></ul>"},register:function(){},ready:function(){},refresh:function(){var t,n,i,r,s,o,a=this.items,c=this.children,l=[];if(a&&(n=a.length,i=c.length,e(this),s=this.itemAdapter)){for(t=0;t<n;++t)r=a[t],r._fromIndex=-1;for(t=0;t<i;++t)r=c[t].item,"_fromIndex"in r&&(r._fromIndex=t);for(t=0;t<n;++t){if(r=a[t],r._fromIndex>=0)o=c[r._fromIndex],l.push(o);else{var u=new s({item:r});l.push(u),this.send("itemAdded",r,u)}delete r._fromIndex}for(t=0;t<n;++t)t<i?c.set(t,l[t]):c.push(l[t]);i>n&&c.splice(n)}}}),n.List=t}(),function(){function e(e,t,n){this.scope=e,this.target=t,this.mode=n.mode,this.source=n.source,this.evaluator=n.evaluator,this.targetProp=n.targetProp,this.sourceProp=n.sourceProp,this.scopePaths=n.scopePaths,this.scopeEvent=n.scopeEvent,this.converters=n.converters,this.exec=this.exec.bind(this)}function t(e,t,n,i,r){var s,o,a,c,u;if(!e.length)return r;for("exec"===t?(o=0,c=1,a=e.length):(o=e.length-1,c=-1,a=-1),s=o;s!==a;s+=c)u=e[s],r=l(u,t,n,i,r);return r}function i(e,t,n){e.set?e.set(t,n):e[t]=n}function r(e,t,n,i,r){var c,l,u,f,h,p;for(c=0,u=t.length;c<u;++c)f=t[c],l=f.lastIndexOf("."),l<0?(h=f,p=n):(h=f.slice(l+1),p=a.search(f.slice(0,l),n,!0)),p&&p[e]&&(p[e]("changed."+h,r.exec),"on"===e?s(i,r):o(i,r))}function s(e,t){var n=e._bindings;n?n.push(t):e._bindings=[t]}function o(e,t){var n=e._bindings;n.splice(n.indexOf(t),1)}var a=n.RES,c=n.EvaluatorUtil,l=c.applyEvaluator;n.defineClass({constructor:e,statics:{build:function(t,n,i,s){var o=s.mode,c=s.scopePaths,l=s.scopeEvent,u=s.converters,f=s.evaluator;if(2===o){var h,p,d,v=c[0];h=v.lastIndexOf("."),h<0?(p=i,d=v):(p=a.search(v.slice(0,h),i,!0),d=v.slice(h+1))}var g=new e(i,t,{mode:o,source:p,evaluator:f,targetProp:n,sourceProp:d,scopePaths:l?null:c,scopeEvent:l,converters:u});return g.exec({dispatcher:p}),o>0&&(l?i.on(l,g.exec):c&&r("on",c,i,t,g),2===o&&r("on",[n],t,p,g)),g},clean:function(e){e.scopeEvent?e.scope.off(e.scopeEvent,e.exec):e.scopePaths&&r("off",e.scopePaths,e.scope,e.target,e),2===e.mode&&r("off",[e.targetProp],e.target,e.source,e)}},exec:function(e){var n,r=this.scope,s=this.evaluator,o=this.converters,a=this.source,c=this.target,u=this.sourceProp,f=this.targetProp;2!==this.mode?(n=l(s,"exec",r,e),o&&(n=t(o,"exec",r,e,n)),i(c,f,n)):e.dispatcher!==c?(n=a[u],o&&(n=t(o,"exec",r,e,n)),i(c,f,n)):(n=c[f],o&&(n=t(o,"back",r,e,n)),i(a,u,n))}}),n.Binding=e}(),function(){function e(){this.mode=0,this.evaluator=null,this.converters=null,this.scopePaths=null,this.scopeEvent=null}var t=n.Binding;e.compile=function(e,n,i,r){t.build(i,n,r,e)},n.BindingTemplate=e}(),function(){function e(){this.exec=null,this.name=""}e.compile=function(e,t,n,i){var r=e.exec,s=e.name;r||(r=i[s]),n.on(t,r.bind(i))},n.HandlerTemplate=e}(),function(){function e(){i.apply(this,arguments)}function t(){this.push.apply(this,arguments)}var i=n.Cache,r=n.DirtyChecker,s=n.ExpressionUtil,o=Array.prototype.join;n.defineClass({constructor:e,extend:i,mixins:[r.prototype],toString:function(){return o.call(this,"")}}),n.defineClass({constructor:t,extend:Array,statics:{compile:function(t,n,i,r){function o(){u.hasDirty()&&(i.set?i.set(n,u.toString()):i[n]=u.toString())}var a,c,l,u=new e,f=t;for(a=0,c=f.length;a<c;a+=2)u[a]=f[a],l=f[a+1],l&&s.applyExpression(l,r,u,a+1);a===c&&(u[c-1]=f[c-1]),u.length=c,o(),t.mode>0&&r.on("refreshed",o),u.onChange=r.invalidate}}}),n.StringTemplate=t}(),function(){function e(e,t){this.literals=e,this.expressions=t}e.compile=function(e,t){},n.StyleXTemplate=e}(),function(){function e(){this.id="",this.as="",this.tag="",this.type=null,this.stay=!1,this.attrs=null,this.style=null,this.classes=null,this.children=null,this.literals=null,this.expressions=null}function t(e,t,n){n.style&&r(e.style,t,n.style)}function i(e,t,n){n.attrs&&r(e.attrs,t,n.attrs)}function r(e,t,n){if(n){var i=n.literals,r=n.expressions;i&&e.set(i),r&&t._expressionsQueue.push({target:e,expressions:r})}}function s(e,t,i){i.expressions&&i.expressions.className&&i.classes&&console.warn("ignore");var s,o,a,c=i.literals,l=c?c.className:"";if(l)for(i.classes||(i.classes=new n.StyleXTemplate),a=i.classes,a.literals||(a.literals={}),c=a.literals,o=l.split(/\s/),s=0;s<o.length;++s)c[o[s]]=!0;i.classes&&r(e.classes,t,i.classes)}function o(e,n,o){r(e,n,o),i(e,n,o),t(e,n,o),s(e,n,o)}function a(e,t,n){var i,r,s,c,p,d,v,g=[],y=n.children;if(y){for(i=0,r=y.length;i<r;++i)d=y[i],"string"==typeof d?v=l.create(d):h.isExpression(d)?(v=l.create(""),t._expressionsQueue.push({target:v,expressions:{data:d}})):d instanceof Object&&(s=d.id,c=d.tag,p=d.type,v=p?f.create(p):u.create(c),o(v,t,d),a(v,t,d),s&&(t[s]=v)),g.push(v);n.type&&e!==t?e.set("contents",g):e.children.reset(g)}}function c(e){var t,n,i,r,s,o,a,c=e._expressionsQueue;for(t=0,n=c.length;t<n;++t){i=c[t],s=i.target,a=i.expressions;for(r in a)a.hasOwnProperty(r)&&(o=a[r],h.applyExpression(o,e,s,r))}}var l=n.Text,u=(n.Shadow,n.Element),f=n.Component,h=(n.ObjectUtil,n.ExpressionUtil);e.parse=null,e.compile=function(e,t){t._expressionsQueue=[],o(t,t,e),a(t,t,e),c(t),delete t._expressionsQueue},n.HTMXTemplate=e}(),function(){var e={},t=/^\S+\{.*\}$/;n.ExpressionParser={isExpression:function(e){return"string"==typeof e&&t.test(e)},registerHelper:function(t,n){return!e.hasOwnProperty(t)&&(e[t]=n,!0)},parse:function(t,n){var i,r,s,o,a;return i=t.indexOf("{"),r=t.lastIndexOf("}"),s=t.slice(0,i),o=t.slice(i+1,r),a=e[s],a&&a(o,n)}}}(),function(){var e=n.StringTemplate,t=n.ExpressionUtil,i=n.ExpressionParser,r=/([\$&#]\{.+?\})/,s=/^`[^`]*([@&\$]\{[^`]+})[^`]*`$/;n.TextStringParser={isStringTemplate:function(e){return"string"==typeof e&&s.test(e)},parse:function(n,s){n=n.trim().slice(1,n.length-1);var o,a,c,l,u=n.split(r);for(u.mode=0,o=0,a=u.length;o<a;o+=2)c=u[o+1],c&&(l=i.parse(c,s),u[o+1]=l,l.template.mode>0&&(u.mode=1));return t.makeExpression(e,u)}}}(),function(){function e(e){e=e.trim();var n=new r;return/^[\w\$]+$/.test(e)?n.name=e:n.exec=t.makeExpressionEvaluator(e,"event").exec,i.makeExpression(r,n)}var t=n.EvaluatorUtil,i=n.ExpressionUtil,r=n.HandlerTemplate,s=n.ExpressionParser;s.registerHelper("@",e),n.HandlerParser={parse:e}}(),function(){function e(e,n){var i,r,s,o,a;o=e.flags;for(var l=0,f=e.length;l<f;++l)i=e[l],s=0,a=void 0,a=u.parse(i),void 0===a&&(w.test(i)?(s=1,a=i.slice(2)):(r=c.search(i,n),r?a=r:(s=2,a=t(i,n)))),e[l]=a,s&&(o||(o=e.flags=[]),o[l]=s);return e}function t(t,n){var i,r,s,o,a,l,f,h;if(b.test(t)){if(i=t.indexOf("!"),r=t.indexOf("$."),o=t.indexOf("("),i=0===i?1:0,r=r===i?1:0,s=i+2*r,o<0)f=[],l=t.slice(s),r?(a=l,f.flags=[1]):(a=u.parse(l),void 0===a&&(a=c.search(l,n))),f.push(a),h=i?m(f):y(f);else if(l=t.slice(s,o),f=v(t.slice(o+1,t.length-1),",","()"),f=f.length?e(f,n):null,l){if(r)h={name:l,args:f};else{if(a=c.search(l,n),!a)throw new Error("no such resource");h=a.exec?g(a.exec,f,a.back):g(a,f)}i&&(f=[h],f.flags=[2],h=m(f))}else h=i?m(f):y(f);return h}return x(t)}function i(e){var t=e.match(E);if(t)for(var n=0,i=t.length;n<i;++n)t[n]=t[n].slice(2);return t}function r(e,n,r){var s,o,a,c=1;switch(e){case"$":c=1;break;case"&":c=0;break;case"#":c=2}if(a=n.lastIndexOf("@"),a>n.lastIndexOf("'")&&(s=n.slice(a+1),n=n.slice(0,a),o=s.trim(),o||(o="refreshed")),c>0&&!o)var l=i(n);var u,f,d,g,y=v(n,"|","()");if(u=y[0],c<2)d=t(u,r);else if(!C.test(u))throw new Error("Illegal two-way binding expression");if(y.length>1)for(f=[],a=1,g=y.length;a<g;++a)u=y[a],")"!==u[u.length-1]&&(u+="()"),f.push(t(u,r));var m=new p;return m.mode=c,m.evaluator=d,m.converters=f,m.scopePaths=l,m.scopeEvent=o,h.makeExpression(p,m)}function s(e){return function(t,n){return r(e,t,n)}}var o,a,c=n.RES,l=n.StringUtil,u=n.LiteralUtil,f=n.EvaluatorUtil,h=n.ExpressionUtil,p=n.BindingTemplate,d=n.ExpressionParser,v=l.split,g=f.makeEvaluator,y=f.makeGetEvaluator,m=f.makeNotEvaluator,x=f.makeExpressionEvaluator,w=/^[\w\$]+((\[|\]?\.)[\w\$]+)*$/,b=/^!?[\w\$]+((\[|\]?\.)[\w\$]+)*(\(.*\))?$/,E=/\$((\[|\]?\.)[\w\$]+)+(?!\()/g,C=/^\$((\[|\]?\.)[\w\$]+)+$/,O={ONE_WAY:"$",ONE_TIME:"&",TWO_WAY:"#"};for(o in O)O.hasOwnProperty(o)&&(a=O[o],d.registerHelper(a,s(a)));n.BindingParser={parse:r}}(),function(){var e=n.StringUtil,t=n.LiteralUtil,i=n.TextStringParser,r=n.ExpressionParser,s=n.StyleXTemplate;n.StyleXParser={parse:function(n,o,a){var c,l,u,f,h,p,d,v,g=e.split(n,";","{}");for(c=0,u=g.length;c<u;++c){if(h=g[c],l=h.indexOf(":"),f=h.slice(0,l).trim(),!f)throw new Error("key should not be empty");v=null,n=h.slice(l+1).trim(),r.isExpression(n)?v=r.parse(n,o):i.isStringTemplate(n)&&(v=i.parse(n,o)),v?(d=d||{},d[f]=v):(p=p||{},p[f]=a?t.parse(n,a):n)}return new s(p,d)}}}(),function(){function e(e){var t,n,i={};for(n in m)m.hasOwnProperty(n)&&(t=m[n],l.hasAttr(e,n)&&(i[t]=l.getAttr(e,n),l.removeAttr(e,n)));return i}function t(e,t){var n,i,r=[],s=l.getChildrenCopy(e);for(n=0,i=s.length;n<i;++n)r.push(compile(s[n],t));return r}function i(t,n,i){var r=e(n);if(r.id&&(t.id=r.id),r.as&&(t.as=r.as),r.type){var s=r.type;if(!(s in x||(s=c.search(s,i))))throw new TypeError("can not find such type");g(t,"type",{value:s})}r.attrs&&g(t,"attrs",{value:p.parse(r.attrs,i,"")}),r.style&&g(t,"style",{value:p.parse(r.style,i,"")}),r.classes&&g(t,"classes",{value:p.parse(r.classes,i,"boolean")})}function r(e,t,n,i,r,s){var o,a;if(n?d.isExpression(n)?a=d.parse(n,r):v.isStringTemplate(n)?a=v.parse(n,r):o=f.parse(n,i):o=!0,a){var c=e.expressions;c||(c=e.expressions={}),c[t]=a}else{var l=e.literals;l||(l=e.literals={}),l[t]=void 0!==o?o:n}}function s(e,t,n){var s,o,a,c;if(e.tag=l.getProp(t,"tagName").toLowerCase(),i(e,t,n),l.hasAttrs(t))for(c=l.getAttrs(t),s=0,o=c.length;s<o;++s)a=c[s],r(e,l.toCamelCase(a.name),a.value,"",n)}function o(e,n,i){var a,c,u,f,p,d,g,m,w,b="",E=e.literals,C=l.getChildrenCopy(n),O=[];for(a=0,c=C.length;a<c;++a)m=C[a],l.isComment(m)||(l.isText(m)?b+=l.getProp(m,"data"):(b&&(b=b.replace(y,"").trim(),v.isStringTemplate(b)?(g=v.parse(b,i),O.push(g)):O.push(b),b=""),w=new h,s(w,m,i),u=w.as,f=w.tag,p=w.type,u&&(u=l.toCamelCase(u),"value"!==f||d?(E||(E=e.literals={}),E[u]=w):"contents"===p?(E||(E=e.literals={}),E[u]=t(m,i)):(!p||p in x)&&(b=l.getProp(m,"textContent"),r(e,u,b,p,i,!0))),o(w,m,i),u&&!d||O.push(w)));b&&(b=b.replace(y,"").trim(),v.isStringTemplate(b)?(g=v.parse(b,i),O.push(g)):O.push(b)),e.children=O}function a(e,t){var n=new h;if(t=t||{},"string"==typeof e&&(e=l.parse(e.trim())[0]),l.isElement(e))return s(n,e,t),o(n,e,t),n}var c=n.RES,l=n.Skin,u=n.ObjectUtil,f=n.LiteralUtil,h=n.HTMXTemplate,p=n.StyleXParser,d=n.ExpressionParser,v=n.TextStringParser,g=u.defineProp,y=/[\n\r\t]/g,m={"x-id":"id","x-as":"as","x-type":"type","x-attrs":"attrs","x-style":"style","x-class":"classes"},x={number:"number","boolean":"boolean",string:"string",json:"json",contents:"contents"};n.HTMXParser={parse:a},n.HTMXTemplate.parse=a}(),function(){function e(){i.apply(this,arguments)}var t=n.Skin,i=n.Component;n.defineClass({constructor:e,extend:i,statics:{$template:"<input>"
},register:function(){this.trigger="change",this.onChange=this.onChange.bind(this)},ready:function(){var e=this;this.on(this.trigger,this.onChange),this.on("changed.trigger",function(t,n,i){e.off(i,e.onChange),e.on(n,e.onChange)})},onChange:function(){this.set("value",t.getProp(this.$skin,"value"))}}),n.Input=e}(),function(){function e(){t.apply(this,arguments)}var t=n.Input;n.defineClass({constructor:e,extend:t,statics:{$template:'<input type="text">'}}),n.TextBox=e}(),function(){function e(){t.apply(this,arguments)}var t=n.Input,i=t.prototype;n.defineClass({constructor:e,extend:t,statics:{$template:'<input type="radio">'},ready:function(e){i.ready.call(this,e),this.onChangedChoice=this.onChangedChoice.bind(this),this.on("changed.choice",this.onChangedChoice)},toggle:function(){this.set("checked",!this.checked)},onChangedChoice:function(){this.set("checked",this.choice===this.value)},onChange:function(){this.toggle(),this.checked&&this.set("choice",this.value)}}),n.Radio=e}(),function(){function e(){t.apply(this,arguments)}var t=n.Input,i=t.prototype;n.defineClass({constructor:e,extend:t,statics:{$template:'<input type="checkbox">'},ready:function(e){i.ready.call(this,e),this.onChoicesChanged=this.onChoicesChanged.bind(this);var t=this;this.on("changed.choices",function(){t.choices.off("changed",t.onChoicesChanged),t.onChoicesChanged(),t.choices.on("changed",t.onChoicesChanged)})},toggle:function(){this.set("checked",!this.checked)},onChoicesChanged:function(){this.set("checked",this.choices.indexOf(this.value)>=0)},onChange:function(){this.toggle(),this.checked?this.choices.push(this.value):this.choices.splice(this.choices.indexOf(this.value),1)}}),n.CheckBox=e}(),function(){function e(){t.apply(this,arguments)}var t=n.List,i=n.Input,r=i.prototype;n.defineClass({constructor:e,extend:t,statics:{$template:"<select></select>"},onChange:r.onChange,register:r.register,ready:r.ready}),n.Select=e}(),function(){function e(){t.apply(this,arguments)}var t=n.Input;n.defineClass({constructor:e,extend:t,statics:{$template:"<textarea></textarea>"}}),n.TextArea=e}(),t?t.exports=n:(e=e||window||{},e.Exact=n)}("undefined"!=typeof global?global:void 0,"undefined"!=typeof module?module:void 0);