<!DOCTYPE html>
<html>
<head lang="en">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  <title>Exact</title>

  <link href="../stylesheets/codemirror.css" rel="stylesheet">
  <link href="../stylesheets/alice.css" rel="stylesheet">
  <link href="../stylesheets/defaults.css" rel="stylesheet">
  <!--<link href="../stylesheets/index.css" rel="stylesheet">-->


</head>
<body>
<header class="header">
  <nav class="nav-bar">
    <h3 class="brand"><a href="../" class="logo">Exact</a></h3>
    <a class="menu-btn"></a>
    <ul class="menu-bar">
      <li><a href="../examples/color-palette.html" class="menu-item"> Examples </a></li>
      <li><a href="../downloads/index.html" class="menu-item"> Downloads </a></li>
      <li><a href="../documents/index.html" class="menu-item  active"> Documents </a></li>
      <li><a href="../apis/index.html" class="menu-item"> APIs </a></li>
      <li><a href="https://github.com/enjolras1024/exact" class="menu-item"> GitHub </a></li>
    </ul>
  </nav>
</header>
<div class="main">
  <aside class="side-bar">
    <div class="card">
      <h4>Overview</h4>
      <ul class="list">
        <li><a href="./index.html#setup" class="link">Setup</a></li>
        <li><a href="./index.html#hello-world" class="link">Hello World</a></li>
        <li><a href="./index.html#composing" class="link">Composing</a></li>
      </ul>
    </div>
    <div class="card">
      <h4>Event</h4>
      <ul class="list">
        <li><a href="./event.html#on-off-once" class="link">On / Off / Once</a></li>
        <li><a href="./event.html#send-emit" class="link">Send / Emit</a></li>
        <li><a href="./event.html#event-type-and-event-name" class="link">Event Type & Event Name</a></li>
      </ul>
    </div>
    <div class="card">
      <h4>Models</h4>
      <ul class="list">
        <li><a href="./models.html#store-for-object" class="link">Store for Object</a></li>
        <li><a href="./models.html#collection-for-array" class="link">Collection for Array</a></li>
      </ul>
    </div>
    <div class="card">
      <h4>Component</h4>
      <ul class="list">
        <li><a href="./component.html#component-element-and-text" class="link">Component, Element and Text</a></li>
        <li><a href="./component.html#props-attrs-style-and-classes" class="link">Props, Attrs, Style and Classes</a></li>
        <li><a href="./component.html#defaults-and-descriptors" class="link">Defaults and Descriptors</a></li>
        <li><a href="./component.html#property-validation" class="link">Property Validation</a></li>
        <li><a href="./component.html#property-interception" class="link">Property Interception</a></li>
        <li><a href="./component.html#property-denpendcy" class="link">Property Dependency</a></li>
        <li><a href="./component.html#children-and-contents" class="link">Children and Contents</a></li>
        <li><a href="./component.html#lifecycle-and-hooks" class="link">Lifecycle and Hooks</a></li>
      </ul>
    </div>
    <div class="card">
      <h4>Template</h4>
      <ul class="list">
        <li><a href="./template.html#event-handler" class="link">Event Handler</a></li>
        <li><a href="./template.html#data-binding" class="link">Data Binding</a></li>
        <li><a href="./template.html#optional-converters" class="link">Optional Converters</a></li>
        <li><a href="./template.html#javascript-expressions" class="link">JavaScript Expressions</a></li>
        <li><a href="./template.html#list-rendering" class="link">List Rendering</a></li>
        <li><a href="./template.html#condition-rendering" class="link">Condition Rendering</a></li>
        <li><a href="./template.html#child-components" class="link">Child Components</a></li>
        <li><a href="./template.html#contents-and-slots" class="link">Contents and Slots</a></li>
        <li><a href="./template.html#reference-to-part" class="link">Reference to Part</a></li>
        <li><a href="./template.html#camlecase-vs-kebabcase" class="link">camelCase vs kebab-case</a></li>
      </ul>
    </div>
    <div class="card">
      <h4>Tips</h4>
      <ul class="list">
        <li><a href="./tips.html" class="link">Data Flow</a></li>
        <li><a href="./tips.html" class="link">Binding Instance Methods</a></li>
        <li><a href="./tips.html" class="link">Using RES to Manage Resources</a></li>
      </ul>
    </div>
  </aside>
  <a class="side-btn">&gt;</a>
  <article class="article">
    <h2>Models</h2>
    <a id="store-for-object"></a>
    <p>如果没有特殊要求，你可以直接使用普通的Object和Array来提供数据。如果需要观察数据对象内部属性的变化，则可以使用Exact提供的Store和Collection。</p>
    <h4 >Store for Object</h4>
    <p><span class="expr">Store</span>实例可发送属性更改的通知，所以它可作为绑定源。
      使用实例方法<span class="expr">set</span>设置一个属性时，会为这个属性创建一对特殊的getter/setter，在属性值发生更改时可派发<span class="expr">changed</span>类型事件。
      通过构造函数、<span class="expr">create</span>或者<span class="expr">save</span>法都会间接地调用<span class="expr">set</span>方法。</p>
    <a id="collection-for-array"></a>
    <div class="code-box scroll">
      <div class="CodeMirror cm-s-alice">
        <div class="CodeMirror-code"><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">var</span> <span class="cm-def">store</span> <span class="cm-operator">=</span> <span class="cm-variable">Exact</span>.<span class="cm-property">Store</span>.<span class="cm-property">create</span>({<span class="cm-property">x</span>: <span class="cm-number">0</span>});<span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-comment">// 会为`x`创建getter/setter</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">store</span>.<span class="cm-property">on</span>(<span class="cm-string">'changed'</span>, <span class="cm-keyword">function</span>(<span class="cm-def">event</span>) {</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">  <span class="cm-variable">console</span>.<span class="cm-property">log</span>(<span class="cm-variable-2">event</span>.<span class="cm-property">keyName</span>, <span class="cm-variable">store</span>[<span class="cm-variable-2">event</span>.<span class="cm-property">keyName</span>]);</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">});</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">store</span>.<span class="cm-property">x</span> <span class="cm-operator">=</span> <span class="cm-number">1</span>; <span class="cm-tab" role="presentation" cm-text="	">   </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">// 输出："x" 1</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">store</span>.<span class="cm-property">y</span> <span class="cm-operator">=</span> <span class="cm-number">2</span>; <span class="cm-tab" role="presentation" cm-text="	">   </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">// 没有输出</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">store</span>.<span class="cm-property">set</span>(<span class="cm-string">'y'</span>, <span class="cm-number">2</span>)<span class="cm-tab" role="presentation" cm-text="	">   </span><span class="cm-comment">// 为`y`创建getter/setter，并输出："y" 2</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">store</span>.<span class="cm-property">y</span> <span class="cm-operator">=</span> <span class="cm-number">3</span>;<span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">// 输出："y" 3</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">store</span>.<span class="cm-property">z</span> <span class="cm-operator">=</span> <span class="cm-number">3</span>; <span class="cm-tab" role="presentation" cm-text="	">   </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">// 没有输出</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">store</span>.<span class="cm-property">save</span>({<span class="cm-property">z</span>: <span class="cm-number">3</span>})<span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-comment">// 为`z`创建getter/setter，并输出："z" 3</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">store</span>.<span class="cm-property">z</span> <span class="cm-operator">=</span> <span class="cm-number">4</span>;<span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">// 输出："z" 4</span></span></pre></div>
      </div>
    </div>
    <h4 >Collection for Array</h4>
    <p>Collection继承自Array，重写了`push`等改变自身结构的方法，以保证当一个Collection对象发生增删或替换时，就会触发`changed`事件。
      用例如下：</p>
    <div class="code-box scroll">
      <div class="CodeMirror cm-s-alice">
        <div class="CodeMirror-lines">
          <div style="position: relative; outline: none;">
            <div class="CodeMirror-code"><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">var</span> <span class="cm-def">collection</span> <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable">Exact</span>.<span class="cm-property">Collection</span>(<span class="cm-number">1</span>,<span class="cm-number">2</span>,<span class="cm-number">3</span>);</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">console</span>.<span class="cm-property">log</span>(<span class="cm-variable">collection</span>)       <span class="cm-comment">// 输出：[1,2,3]</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">collection</span> <span class="cm-operator">=</span> <span class="cm-variable">Exact</span>.<span class="cm-property">Collection</span>.<span class="cm-property">from</span>([<span class="cm-number">0</span>,<span class="cm-number">1</span>,<span class="cm-number">2</span>]);</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">console</span>.<span class="cm-property">log</span>(<span class="cm-variable">collection</span>)       <span class="cm-comment">// 输出：[0,1,2]</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">collection</span>.<span class="cm-property">on</span>(<span class="cm-string">'changed'</span>, <span class="cm-keyword">function</span>() {</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">  <span class="cm-variable">console</span>.<span class="cm-property">log</span>(<span class="cm-variable">collection</span>);</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">});</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">collection</span>.<span class="cm-property">push</span>(<span class="cm-number">3</span>, <span class="cm-number">4</span>);        <span class="cm-comment">// 输出：[0,1,2,3,4]</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">collection</span>.<span class="cm-property">unshift</span>(<span class="cm-operator">-</span><span class="cm-number">1</span>);       <span class="cm-comment">// 输出：[-1,0,1,2,3,4]</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">collection</span>.<span class="cm-property">pop</span>();             <span class="cm-comment">// 输出：[-1,0,1,2,3]</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">collection</span>.<span class="cm-property">shift</span>();           <span class="cm-comment">// 输出：[0,1,2,3]</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">collection</span>.<span class="cm-property">splice</span>(<span class="cm-number">2</span>, <span class="cm-number">0</span>, <span class="cm-number">1.5</span>); <span class="cm-comment">// 输出：[0,1,1.5,2,3]</span></span></pre></div>
          </div>
        </div>
      </div>
    </div>
    <p>Collection没有重写`slice`等不改变自身结构的方法，这些方法依然返回新的数组而非新的Collection对象。
      由于ES5的限制，通过索引下标来赋值和直接修改collection的长度，都无法触发`changed`事件，建议使用如下方法替代：</p>
    <div class="code-box scroll">
      <div class="CodeMirror cm-s-alice">
        <div class="CodeMirror-lines">
          <div style="position: relative; outline: none;">
            <div class="CodeMirror-code"><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">collection</span>.<span class="cm-property">set</span>(<span class="cm-variable">index</span>, <span class="cm-variable">item</span>); <span class="cm-comment">// 替代collection[index] = item;</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">collection</span>.<span class="cm-property">splice</span>(<span class="cm-variable">length</span>);   <span class="cm-comment">// 替代collection.length = length;</span></span></pre></div>
          </div>
        </div>
      </div>
    </div>
    <p>Collection额外提供了`insert`、`remove`和`replace`三个方法，类似于DOM子节点操作方法中的`insertBefore`、`removeChild`和`replaceChild`，用法如下：</p>
    <div class="code-box scroll">
      <!--<pre class="code-behind js-mode">
var collection = new Exact.Collection();

// 末尾插入
collection.insert({x: 1});
collection.insert({x: 2});                // [{x: 1}, {x: 2}]

// 在某个已有元素之前插入
collection.insert({x: 0), collection[0]); // [{x: 0}, {x: 1}, {x: 2}]

// 移除已有元素
collection.remove(collection[1]);         // [{x: 0}, {x: 2}]

// 替换已有元素
collection.replace(collection[1], {x: 1});// [{x: 0}, {x: 1}]
  </pre>-->
      <div class="CodeMirror cm-s-alice">
        <div class="CodeMirror-lines">
          <div style="position: relative; outline: none;">
            <div class="CodeMirror-code"><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">var</span> <span class="cm-def">collection</span> <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable">Exact</span>.<span class="cm-property">Collection</span>();</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">// 末尾插入</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">collection</span>.<span class="cm-property">insert</span>({<span class="cm-property">x</span>: <span class="cm-number">1</span>});</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">collection</span>.<span class="cm-property">insert</span>({<span class="cm-property">x</span>: <span class="cm-number">2</span>});                <span class="cm-comment">// [{x: 1}, {x: 2}]</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">// 在某个已有元素之前插入</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">collection</span>.<span class="cm-property">insert</span>({<span class="cm-property">x</span>: <span class="cm-number">0</span>), <span class="cm-variable">collection</span>[<span class="cm-number">0</span>]); <span class="cm-comment">// [{x: 0}, {x: 1}, {x: 2}]</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">// 移除已有元素</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">collection</span>.<span class="cm-variable">remove</span>(<span class="cm-variable">collection</span>[<span class="cm-number">1</span>]);         <span class="cm-comment">// [{x: 0}, {x: 2}]</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">// 替换已有元素</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">collection</span>.<span class="cm-variable">replace</span>({<span class="cm-variable">x</span>: <span class="cm-number">1</span>}, <span class="cm-variable">collection</span>[<span class="cm-number">1</span>]);<span class="cm-comment">// [{x: 0}, {x: 1}]</span></span></pre></div>
          </div>
        </div>
      </div>
    </div>

    <!--<p>事实上，Element和Component对象的children属性值即为Collection对象，每当调整children时，就会引发这个Element对象启动失效机制，等待重新渲染。</p>-->
  </article>
</div>
<!--<footer class="footer">
  <p>Released under the MIT license<br>
    © 2015 Chen Junyong. All rights reserved.</p>
</footer>-->

<!--<script src="../javascripts/codemirror.js"></script>-->
<!--<script src="../javascripts/javascript-mode.js"></script>-->
<!--<script src="../javascripts/code-format.js"></script>-->
<script src="../javascripts/site.js"></script>
</body>
</html>